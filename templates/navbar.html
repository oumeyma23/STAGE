<nav class="navbar navbar-expand-lg navbar-light fixed-top py-3 {% if current_language == 'ar' %}navbar-rtl{% endif %}" id="mainNav">
    <div class="container px-4 px-lg-5 {% if current_language == 'ar' %}d-flex flex-row-reverse{% endif %}">
        {% if current_language == 'ar' %}
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
            <a class="navbar-brand d-flex align-items-center gap-2" href="{{ url_for('accueil') }}">
                <img src="{{ url_for('static', filename='assets/img/logo-securibanque.png') }}" alt="SecuriBank" class="brand-logo" style="height:56px;width:auto;">
                <span class="fw-bold">SecuriBank</span>
            </a>
        {% else %}
            <a class="navbar-brand d-flex align-items-center gap-2" href="{{ url_for('accueil') }}">
                <img src="{{ url_for('static', filename='assets/img/logo-securibanque.png') }}" alt="SecuriBank" class="brand-logo" style="height:56px;width:auto;">
                <span class="fw-bold">SecuriBank</span>
            </a>
            <button class="navbar-toggler navbar-toggler-right" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
        {% endif %}
        <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav {% if current_language == 'ar' %}me-auto{% else %}ms-auto{% endif %} my-2 my-lg-0">
                {% if session.user %}
                    {% if current_language == 'ar' %}
                        <li class="nav-item"><a class="nav-link" href="{{ url_for('demande_credit') }}">Ø·Ù„Ø¨ Ù‚Ø±Ø¶</a></li>
                        <li class="nav-item"><a class="nav-link" href="{{ url_for('logout') }}">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</a></li>
                    {% elif current_language == 'en' %}
                        <li class="nav-item"><a class="nav-link" href="{{ url_for('demande_credit') }}">Credit Request</a></li>
                        <li class="nav-item"><a class="nav-link" href="{{ url_for('logout') }}">Logout</a></li>
                    {% else %}
                        <li class="nav-item"><a class="nav-link" href="{{ url_for('demande_credit') }}">Demande CrÃ©dit</a></li>
                        <li class="nav-item"><a class="nav-link" href="{{ url_for('logout') }}">DÃ©connexion</a></li>
                    {% endif %}
                {% else %}
                    {% if current_language == 'ar' %}
                        <li class="nav-item"><a class="nav-link" href="{{ url_for('login') }}">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a></li>
                        <li class="nav-item"><a class="nav-link" href="{{ url_for('signup') }}">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</a></li>
                    {% elif current_language == 'en' %}
                        <li class="nav-item"><a class="nav-link" href="{{ url_for('login') }}">Login</a></li>
                        <li class="nav-item"><a class="nav-link" href="{{ url_for('signup') }}">Sign Up</a></li>
                    {% else %}
                        <li class="nav-item"><a class="nav-link" href="{{ url_for('login') }}">Connexion</a></li>
                        <li class="nav-item"><a class="nav-link" href="{{ url_for('signup') }}">Inscription</a></li>
                    {% endif %}
                {% endif %}
                <!-- Language Selector -->
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="languageDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="bi-globe"></i>
                    </a>
                    <ul class="dropdown-menu {% if current_language == 'ar' %}dropdown-menu-start{% else %}dropdown-menu-end{% endif %}" aria-labelledby="languageDropdown">
                        <li><a class="dropdown-item" href="{{ url_for('set_language', language='fr') }}">
                            ðŸ‡«ðŸ‡· FranÃ§ais
                        </a></li>
                        <li><a class="dropdown-item" href="{{ url_for('set_language', language='en') }}">
                            ðŸ‡ºðŸ‡¸ English
                        </a></li>
                        <li><a class="dropdown-item" href="{{ url_for('set_language', language='ar') }}">
                            ðŸ‡¹ðŸ‡³ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
                        </a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>

<style>
/* RTL/LTR Navigation Adjustments */
.navbar-rtl {
    direction: rtl;
}
.navbar-rtl .navbar-brand {
    margin-right: 0;
    margin-left: auto;
}
.navbar-rtl .navbar-nav {
    margin-left: 0;
    margin-right: auto;
}
.navbar-rtl .navbar-toggler {
    left: 0;
    right: auto;
}

/* Solid white navbar (no background image visible) */
#mainNav {
    background: #ffffff !important;
    background-color: #ffffff !important;
    backdrop-filter: none !important;
    box-shadow: none !important;
    transition: box-shadow 0.25s ease;
}
#mainNav.scrolled {
    box-shadow: 0 6px 18px rgba(0,0,0,0.08) !important;
}
/* Responsive logo size */
@media (max-width: 576px) {
  .navbar-brand .brand-logo { height: 44px !important; }
}

/* Ensure navbar text is readable on white */
#mainNav .navbar-brand,
#mainNav .navbar-brand span,
#mainNav .nav-link,
#mainNav .navbar-toggler {
  color: #2c3e50 !important; /* dark readable */
}
#mainNav .navbar-toggler-icon { filter: none; }
</style>

<script>
  // Add a subtle shadow when the page is scrolled
  (function(){
    const nav = document.getElementById('mainNav');
    if (!nav) return;
    function onScroll(){
      if (window.scrollY > 8) nav.classList.add('scrolled');
      else nav.classList.remove('scrolled');
    }
    window.addEventListener('scroll', onScroll, { passive: true });
    onScroll();
  })();
  </script>
