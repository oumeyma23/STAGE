<!DOCTYPE html>
<html lang="{{ current_language or 'fr' }}" {% if current_language == 'ar' %}dir="rtl"{% endif %}>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  {% if current_language == 'ar' %}
    <title>نسيت كلمة المرور - SecuriBank</title>
  {% elif current_language == 'en' %}
    <title>Forgot Password - SecuriBank</title>
  {% else %}
    <title>Mot de passe oublié - SecuriBank</title>
  {% endif %}
  <!-- Icons & fonts -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css?family=Merriweather+Sans:400,700" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic" rel="stylesheet" type="text/css" />
  <!-- Core CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
  <style>
    :root {
      --brand-blue: #0b2d4a;
      --primary: #f4623a;
      --text-1: #2c3e50;
      --text-2: #6b7280;
      --radius: 12px;
    }
    .auth-wrapper { min-height: 100vh; display: flex; }
    .left-pane { flex: 1; display: flex; align-items: center; justify-content: center; padding: 32px 48px; background: #ffffff; }
    .right-pane { flex: 1; background-color: var(--brand-blue); color: #fff; position: relative; display: none; overflow: hidden; }
    .right-pane .overlay { position: relative; z-index: 1; height: 100%; padding: 48px; display: flex; flex-direction: column; justify-content: center; }
    .hero { position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; }
    .hero img { width: 100%; height: 100%; object-fit: cover; object-position: center; background: var(--brand-blue); transition: opacity .35s ease; }
    .dots { position: absolute; bottom: 24px; left: 50%; transform: translateX(-50%); display: flex; gap: 10px; z-index: 2; }
    .dot { width: 10px; height: 10px; border-radius: 50%; background: rgba(255,255,255,0.5); }
    @media (min-width: 992px) { .right-pane { display: block; } }

    .card-form { width: 100%; max-width: 560px; }
    .step { display:flex; align-items:center; gap:12px; margin-bottom: 12px; }
    .step .bar { flex:1; height:4px; background:#e5e7eb; border-radius:999px; position:relative; overflow:hidden; }
    .step .bar::after { content:""; position:absolute; left:0; top:0; bottom:0; width:33%; background:var(--primary); }
    .title { font-size: 28px; font-weight: 800; color: var(--text-1); margin: 4px 0 8px; }
    .subtitle { color: var(--text-2); margin-bottom: 20px; }
    .form-label { font-weight: 600; color: var(--text-1); }
    .form-control { height: 48px; border-radius: var(--radius); }
    .btn-primary { background: var(--primary); border: none; height: 48px; border-radius: var(--radius); }
    .btn-primary:hover { filter: brightness(.95); }
    .helper-badges { display:flex; gap:10px; margin-top:16px; opacity:.75; }
    .helper-badges img { height:34px; }
  </style>
</head>
<body>
  {% include 'navbar.html' %}

  <div class="auth-wrapper">
    <div class="left-pane">
      <div class="card-form text-start">
        <div class="step">
          <div>{% if current_language=='ar' %}الخطوة 1/3{% elif current_language=='en' %}Step 1/3{% else %}Étape 1/3{% endif %}</div>
          <div class="bar"></div>
        </div>
        <div class="title">
          {% if current_language=='ar' %}تحديد هوية المستخدم{% elif current_language=='en' %}User Identification{% else %}Identification de l'utilisateur{% endif %}
        </div>
        <div class="subtitle">
          {% if current_language=='ar' %}
            يرجى إدخال بريدك الإلكتروني. إذا نسيت المعرّف، اتصل بمركز خدمة العملاء أو أقرب فرع للمساعدة.
          {% elif current_language=='en' %}
            Please enter your email. If you forgot your identifier, contact Customer Care or your branch for assistance.
          {% else %}
            Veuillez saisir votre e‑mail. Si vous avez oublié votre identifiant, contactez le Centre Relation Client ou votre agence.
          {% endif %}
        </div>

        {% if error %}
          <div class="alert alert-danger mb-3">{{ error }}</div>
        {% endif %}
        {% if success %}
          <div class="alert alert-success mb-3">{{ success }}</div>
        {% endif %}

        <form method="POST" class="needs-validation" novalidate>
          <div class="mb-3">
            <label class="form-label" for="email">Email</label>
            <input type="email" id="email" name="email" class="form-control" autocomplete="email" required>
            <div class="invalid-feedback">
              {% if current_language=='ar' %}يرجى إدخال بريد إلكتروني صالح{% elif current_language=='en' %}Please enter a valid email{% else %}Veuillez saisir un email valide{% endif %}
            </div>
          </div>
          <button type="submit" class="btn btn-primary">
            {% if current_language=='ar' %}التالي{% elif current_language=='en' %}Next{% else %}Suivant{% endif %}
          </button>
          <div class="helper-badges">
            <img src="{{ url_for('static', filename='assets/img/appstore_placeholder.png') }}" alt="App Store" onerror="this.style.display='none'">
            <img src="{{ url_for('static', filename='assets/img/googleplay_placeholder.png') }}" alt="Google Play" onerror="this.style.display='none'">
            <img src="{{ url_for('static', filename='assets/img/appgallery_placeholder.png') }}" alt="AppGallery" onerror="this.style.display='none'">
          </div>
        </form>
      </div>
    </div>

    <div class="right-pane">
      <div class="hero">
        <img id="heroImage" src="{{ url_for('static', filename='assets/img/Image2.png') }}" alt="hero" />
      </div>
      <div class="overlay">
        <h2 style="font-weight:800; margin-bottom:6px;">{% if current_language=='ar' %}هوية مستخدم SecuriBank{% elif current_language=='en' %}SecuriBank User ID{% else %}Identification de l'utilisateur SecuriBank{% endif %}</h2>
        <p style="opacity:.85">{% if current_language=='ar' %}مصممة معكم، من أجلكم{% elif current_language=='en' %}Designed with you, for you{% else %}Conçue avec vous, pour vous{% endif %}</p>
      </div>
      <div class="dots" id="dots">
        <span class="dot active"></span>
        <span class="dot"></span>
        <span class="dot"></span>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Basic client validation
    (function(){
      const form = document.querySelector('.needs-validation');
      if (!form) return;
      form.addEventListener('submit', function(e){
        if (!form.checkValidity()){
          e.preventDefault(); e.stopPropagation();
        }
        form.classList.add('was-validated');
      });
    })();

    // Simple dots indicator (static for now)
  </script>
</body>
</html>
